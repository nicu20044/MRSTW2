@using MusicStore2.Domain.Entities.Product
@model IEnumerable<ProductData>

@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="hero-section">
    <img src="~/UploadedImages/header_image.jpg" alt="header_image" />
</div>

<div class="container">
    <section class="tracks-section">
        <div class="section-header">
            <h2>New Releases</h2>
        </div>
        <div class="tracks-grid">
            @foreach (var product in Model.Take(5))
            {
                var imageUrl = string.IsNullOrEmpty(product.ImageUrl) ? "~/images/default-cover.png" : product.ImageUrl;
                var audioUrl = string.IsNullOrEmpty(product.AudioFileUrl) ? "~/audio/placeholder.mp3" : product.AudioFileUrl;

                <a href="@Url.Action("Details", "Product", new { id = product.Id })" class="track-card-link">
                    <div class="track-card">
                        <div class="track-image">
                            <img src="@Url.Content(imageUrl)" alt="Track artwork" />
                            <button class="play-button play-toggle" data-audio-id="audio-@product.Id" onclick="event.preventDefault(); togglePlay(this)">
                                <svg viewBox="0 0 24 24" width="24" height="24">
                                    <path d="M8 5v14l11-7z" fill="currentColor" />
                                </svg>
                            </button>
                            <audio id="audio-@product.Id" src="@Url.Content(audioUrl)"></audio>
                        </div>
                        <div class="track-info">
                            <h3>@product.Name</h3>
                            <p>@product.ArtistName</p>
                        </div>
                    </div>
                </a>
            }
        </div>
    </section>
</div>
